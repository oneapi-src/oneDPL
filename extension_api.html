
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Extension API &#8212; oneAPI Libraries Documentation 1.0 documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <link rel="shortcut icon" href="_static/favicons.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tested Standard C++ APIs" href="tested_standard_cpp_api.html" />
    <link rel="prev" title="Macros" href="pstl/macros.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      <img src="_static/oneAPI-rgb-rev-100.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">oneAPI Libraries Documentation 1.0 documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="before_you_begin.html">
   Before You Begin
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="pstl_main.html">
   Parallel STL Overview
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="pstl/dpcpp_policies_usage.html">
     Parallel STL Usage
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pstl/macros.html">
     Macros
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Extension API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tested_standard_cpp_api.html">
   Tested Standard C++ APIs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="random.html">
   Random Number Generators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="notices_disclaimers.html">
   Notices and Disclaimers
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/extension_api.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#parallel-algorithms">
   Parallel Algorithms
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#iterators">
   Iterators
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#function-object-classes">
   Function Object Classes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#range-based-api">
   Range-based API
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example-of-range-based-api-usage">
   Example of Range-based API Usage
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#async-api">
   Async API
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-of-async-api-usage">
     Example of Async API Usage
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="extension-api">
<h1>Extension API<a class="headerlink" href="#extension-api" title="Permalink to this headline">¶</a></h1>
<p>The Extension API currently includes algorithms, iterators, and function object classes. The algorithms
include segmented reduce, segmented scan and vectorized search algorithms. The iterators provided implement
zip, transform, and permutation operations on other iterators, and also include a counting iterator
and a discard iterator. The function object classes provide minimum, maximum and identity operations
that may be passed to algorithms such as reduce or transform. The Extension API also includes an experimental
implementation of range-based algorithms and the ranges required to use them.</p>
<div class="section" id="parallel-algorithms">
<h2>Parallel Algorithms<a class="headerlink" href="#parallel-algorithms" title="Permalink to this headline">¶</a></h2>
<p>The definitions of the algorithms provided in the Extension API are available through the <code class="docutils literal notranslate"><span class="pre">oneapi/dpl/algorithm</span></code>
header.  All algorithms are implemented in the <code class="docutils literal notranslate"><span class="pre">oneapi::dpl</span></code> namespace.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">reduce_by_segment</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">reduce_by_segment</span></code> algorithm performs partial reductions on a sequence’s values and keys. Each
reduction is computed with a given reduction operation for a contiguous subsequence of values, which are
determined by keys being equal according to a predicate. A return value is a pair of iterators holding
the end of the output sequences for keys and values.</p>
<p>For correct computation, the reduction operation should be associative. If no operation is specified,
the default operation for the reduction is <code class="docutils literal notranslate"><span class="pre">std::plus</span></code>, and the default predicate is <code class="docutils literal notranslate"><span class="pre">std::equal_to</span></code>.
The algorithm requires that the type of the elements used for values be default constructible. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">keys</span><span class="p">:</span>   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">values</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">output_keys</span><span class="p">:</span>   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">output_values</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="o">+</span><span class="mi">5</span><span class="o">+</span><span class="mi">6</span><span class="o">=</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">inclusive_scan_by_segment</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">inclusive_scan_by_segment</span></code> algorithm performs partial prefix scans on a sequence’s values. Each
scan applies to a contiguous subsequence of values, which are determined by the keys associated with the
values being equal. The return value is an iterator targeting the end of the result sequence.</p>
<p>For correct computation, the prefix scan operation should be associative. If no operation is specified,
the default operation is <code class="docutils literal notranslate"><span class="pre">std::plus</span></code>, and the default predicate is <code class="docutils literal notranslate"><span class="pre">std::equal_to</span></code>. The algorithm
requires that the type of the elements used for values be default constructible. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">keys</span><span class="p">:</span>   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">values</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">result</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="o">+</span><span class="mi">5</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span><span class="mi">4</span><span class="o">+</span><span class="mi">5</span><span class="o">+</span><span class="mi">6</span><span class="o">=</span><span class="mi">15</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">exclusive_scan_by_segment</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">exclusive_scan_by_segment</span></code> algorithm performs partial prefix scans on a sequence’s values. Each
scan applies to a contiguous subsequence of values that are determined by the keys associated with the values
being equal, and sets the first element to the initial value provided. The return value is an iterator
targeting the end of the result sequence.</p>
<p>For correct computation, the prefix scan operation should be associative. If no operation is specified,
the default operation is <code class="docutils literal notranslate"><span class="pre">std::plus</span></code>, and the default predicate is <code class="docutils literal notranslate"><span class="pre">std::equal_to</span></code>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">keys</span><span class="p">:</span>   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">values</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">initial</span> <span class="n">value</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">result</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="o">+</span><span class="mi">1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="o">+</span><span class="mi">4</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="o">+</span><span class="mi">4</span><span class="o">+</span><span class="mi">5</span><span class="o">=</span><span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">binary_search</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">binary_search</span></code> algorithm performs a binary search of the input sequence for each of the values in
the search sequence provided.  For each element of the search sequence the algorithm writes a boolean value
to the result sequence that indicates whether the search value was found in the input sequence. An iterator
to one past the last value in the result sequence is returned. The algorithm assumes the input sequence has
been sorted by the comparator provided. If no comparator is provided then a function object that uses
<code class="docutils literal notranslate"><span class="pre">operator&lt;</span></code> to compare the elements will be used. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">input</span> <span class="n">sequence</span><span class="p">:</span>  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">search</span> <span class="n">sequence</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">result</span> <span class="n">sequence</span><span class="p">:</span> <span class="p">[</span><span class="n">true</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">true</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lower_bound</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">lower_bound</span></code> algorithm performs a binary search of the input sequence for each of the values in
the search sequence provided to identify the lowest index in the input sequence where the search value could
be inserted without violating the sorted ordering of the input sequence.  The lowest index for each search
value is written to the result sequence, and the algorithm returns an iterator to one past the last value
written to the result sequence. If no comparator is provided then a function object that uses <code class="docutils literal notranslate"><span class="pre">operator&lt;</span></code>
to compare the elements will be used. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">input</span> <span class="n">sequence</span><span class="p">:</span>  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">search</span> <span class="n">sequence</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">result</span> <span class="n">sequence</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">upper_bound</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">upper_bound</span></code> algorithm performs a binary search of the input sequence for each of the values in
the search sequence provided to identify the highest index in the input sequence where the search value could
be inserted without violating the sorted ordering of the input sequence.  The highest index for each search
value is written to the result sequence, and the algorithm returns an iterator to one past the last value
written to the result sequence. If no comparator is provided then a function object that uses <code class="docutils literal notranslate"><span class="pre">operator&lt;</span></code>
to compare the elements will be used. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">input</span> <span class="n">sequence</span><span class="p">:</span>  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">search</span> <span class="n">sequence</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">result</span> <span class="n">sequence</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="iterators">
<h2>Iterators<a class="headerlink" href="#iterators" title="Permalink to this headline">¶</a></h2>
<p>The definitions of the iterators provided in the Extension API are available through the <code class="docutils literal notranslate"><span class="pre">oneapi/dpl/iterator</span></code>
header.  All iterators are implemented in the <code class="docutils literal notranslate"><span class="pre">oneapi::dpl</span></code> namespace.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">counting_iterator</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">counting_iterator</span></code> is a random access iterator-like type whose dereferenced value is an integer
counter. Instances of <code class="docutils literal notranslate"><span class="pre">counting_iterator</span></code> provide read-only dereference operations. The counter of an
<code class="docutils literal notranslate"><span class="pre">counting_iterator</span></code> instance changes according to the arithmetic of the random access iterator type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">namespace</span> <span class="n">oneapi</span><span class="p">;</span>
<span class="n">dpl</span><span class="p">::</span><span class="n">counting_iterator</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="n">count_a</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">dpl</span><span class="p">::</span><span class="n">counting_iterator</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="n">count_b</span> <span class="o">=</span> <span class="n">count_a</span> <span class="o">+</span> <span class="mi">10</span><span class="p">;</span>
<span class="nb">int</span> <span class="n">init</span> <span class="o">=</span> <span class="n">count_a</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="o">//</span> <span class="n">OK</span><span class="p">:</span> <span class="n">init</span> <span class="o">==</span> <span class="mi">0</span>
<span class="o">*</span><span class="n">count_b</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span> <span class="o">//</span> <span class="n">ERROR</span><span class="p">:</span> <span class="n">counting_iterator</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">provide</span> <span class="n">write</span> <span class="n">operations</span>
<span class="n">auto</span> <span class="nb">sum</span> <span class="o">=</span> <span class="n">std</span><span class="p">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">dpl</span><span class="p">::</span><span class="n">execution</span><span class="p">::</span><span class="n">dpcpp_default</span><span class="p">,</span>
                       <span class="n">count_a</span><span class="p">,</span> <span class="n">count_b</span><span class="p">,</span> <span class="n">init</span><span class="p">);</span> <span class="o">//</span> <span class="nb">sum</span> <span class="ow">is</span> <span class="p">(</span><span class="mi">0</span> <span class="o">+</span> <span class="mi">0</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="o">...</span> <span class="o">+</span> <span class="mi">9</span><span class="p">)</span> <span class="o">=</span> <span class="mi">45</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">discard_iterator</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">discard_iterator</span></code> is a random access iterator-like type that provides write-only dereference
operations that discard values passed.</p>
<p>The iterator is useful in the implementation of stencil algorithms where the stencil is not part of the
desired output. An example of this would be a <code class="docutils literal notranslate"><span class="pre">copy_if</span></code> algorithm that receives an an input iterator range
and a stencil iterator range and copies the elements of the input whose corresponding stencil value is 1. We
do not want to declare a temporary allocation to store the copy of the stencil, and thus use <code class="docutils literal notranslate"><span class="pre">discard_iterator</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">namespace</span> <span class="n">oneapi</span><span class="p">;</span>
<span class="n">auto</span> <span class="n">zipped_first</span> <span class="o">=</span> <span class="n">dpl</span><span class="p">::</span><span class="n">make_zip_iterator</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">stencil</span><span class="p">);</span>
<span class="n">std</span><span class="p">::</span><span class="n">copy_if</span><span class="p">(</span><span class="n">dpl</span><span class="p">::</span><span class="n">execution</span><span class="p">::</span><span class="n">dpcpp_default</span><span class="p">,</span>
             <span class="n">zipped_first</span><span class="p">,</span> <span class="n">zipped_first</span> <span class="o">+</span> <span class="p">(</span><span class="n">last</span> <span class="o">-</span> <span class="n">first</span><span class="p">),</span>
             <span class="n">dpl</span><span class="p">::</span><span class="n">make_zip_iterator</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">dpl</span><span class="p">::</span><span class="n">discard_iterator</span><span class="p">()),</span>
             <span class="p">[](</span><span class="n">auto</span> <span class="n">t</span><span class="p">){</span><span class="k">return</span> <span class="n">get</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">;}</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform_iterator</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">transform_iterator</span></code> is an iterator defined over another iterator whose dereferenced value is the result
of a function applied to the corresponding element of the original iterator.  Both the type of the original
iterator and the unary function applied during dereference operations are required template parameters of
the <code class="docutils literal notranslate"><span class="pre">transform_iterator</span></code> class. The <code class="docutils literal notranslate"><span class="pre">transform_iterator</span></code> class provides three constructors:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">transform_iterator()</span></code> instantiates the iterator using default constructed base iterator and unary functor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform_iterator(iter)</span></code> instantiates the iterator using the base iterator provided and a default constructed unary functor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform_iterator(iter,</span> <span class="pre">func)</span></code> instantiates the iterator using the base iterator and unary functor provided.</p></li>
</ul>
<p>To simplify the construction of the iterator <code class="docutils literal notranslate"><span class="pre">oneapi::dpl::make_transform_iterator</span></code> is provided. The
function receives the original iterator and transform operation instance as arguments, and constructs the
<code class="docutils literal notranslate"><span class="pre">transform_iterator</span></code> instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">namespace</span> <span class="n">oneapi</span><span class="p">;</span>
<span class="n">dpl</span><span class="p">::</span><span class="n">counting_iterator</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="n">first</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">dpl</span><span class="p">::</span><span class="n">counting_iterator</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="n">last</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="n">auto</span> <span class="n">transform_first</span> <span class="o">=</span> <span class="n">dpl</span><span class="p">::</span><span class="n">make_transform_iterator</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">std</span><span class="p">::</span><span class="n">negate</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">());</span>
<span class="n">auto</span> <span class="n">transform_last</span> <span class="o">=</span> <span class="n">transform_first</span> <span class="o">+</span> <span class="p">(</span><span class="n">last</span> <span class="o">-</span> <span class="n">first</span><span class="p">);</span>
<span class="n">auto</span> <span class="nb">sum</span> <span class="o">=</span> <span class="n">std</span><span class="p">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">dpl</span><span class="p">::</span><span class="n">execution</span><span class="p">::</span><span class="n">dpcpp_default</span><span class="p">,</span>
                       <span class="n">transform_first</span><span class="p">,</span> <span class="n">transform_last</span><span class="p">);</span> <span class="o">//</span> <span class="nb">sum</span> <span class="ow">is</span> <span class="p">(</span><span class="mi">0</span> <span class="o">+</span> <span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="o">...</span> <span class="o">+</span> <span class="o">-</span><span class="mi">9</span><span class="p">)</span> <span class="o">=</span> <span class="o">-</span><span class="mi">45</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">permutation_iterator</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">permutation_iterator</span></code> is an iterator whose dereferenced value set is defined by the source iterator
provided, and whose iteration order over the dereferenced value set is defined by either another iterator or
a functor whose index operator defines the mapping from the <code class="docutils literal notranslate"><span class="pre">permutation_iterator</span></code> index to the index of the
source iterator. The <code class="docutils literal notranslate"><span class="pre">permutation_iterator</span></code> is useful in implementing applications where noncontiguous
elements of data represented by an iterator need to be processed by an algorithm as though they were contiguous.
An example is copying every other element to an output iterator.</p>
<p><code class="docutils literal notranslate"><span class="pre">make_permutation_iterator</span></code> is provided to simplify construction of iterator instances.  The function
receives the source iterator and the iterator or function object representing the index map:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">multiply_index_by_two</span> <span class="p">{</span>
    <span class="n">template</span> <span class="o">&lt;</span><span class="n">typename</span> <span class="n">Index</span><span class="o">&gt;</span>
    <span class="n">Index</span> <span class="n">operator</span><span class="p">()(</span><span class="n">const</span> <span class="n">Index</span><span class="o">&amp;</span> <span class="n">i</span><span class="p">)</span>
    <span class="p">{</span> <span class="k">return</span> <span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="o">//</span> <span class="n">first</span> <span class="ow">and</span> <span class="n">last</span> <span class="n">are</span> <span class="n">iterators</span> <span class="n">that</span> <span class="n">define</span> <span class="n">a</span> <span class="n">contiguous</span> <span class="nb">range</span> <span class="n">of</span> <span class="nb">input</span> <span class="n">elements</span>
<span class="o">//</span> <span class="n">compute</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">elements</span> <span class="ow">in</span> <span class="n">the</span> <span class="nb">range</span> <span class="n">between</span> <span class="n">the</span> <span class="n">first</span> <span class="ow">and</span> <span class="n">last</span> <span class="n">that</span> <span class="n">are</span> <span class="n">accessed</span>
<span class="o">//</span> <span class="n">by</span> <span class="n">the</span> <span class="n">permutation</span> <span class="n">iterator</span>
<span class="n">size_t</span> <span class="n">num_elements</span> <span class="o">=</span> <span class="n">std</span><span class="p">::</span><span class="n">distance</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">std</span><span class="p">::</span><span class="n">distance</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">using</span> <span class="n">namespace</span> <span class="n">oneapi</span><span class="p">;</span>
<span class="n">auto</span> <span class="n">permutation_first</span> <span class="o">=</span> <span class="n">dpl</span><span class="p">::</span><span class="n">make_permutation_iterator</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">multiply_index_by_two</span><span class="p">());</span>
<span class="n">auto</span> <span class="n">permutation_last</span> <span class="o">=</span> <span class="n">permutation_first</span> <span class="o">+</span> <span class="n">num_elements</span><span class="p">;</span>
<span class="n">std</span><span class="p">::</span><span class="n">copy</span><span class="p">(</span><span class="n">dpl</span><span class="p">::</span><span class="n">execution</span><span class="p">::</span><span class="n">dpcpp_default</span><span class="p">,</span> <span class="n">permutation_first</span><span class="p">,</span> <span class="n">permutation_last</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">zip_iterator</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">zip_iterator</span></code> is an iterator constructed with one or more iterators as input. The value returned by the
iterator when dereferenced is a tuple of the values returned by dereferencing the member iterators on which
the <code class="docutils literal notranslate"><span class="pre">zip_iterator</span></code> is defined. Arithmetic operations performed on a <code class="docutils literal notranslate"><span class="pre">zip_iterator</span></code> instance are also
applied to each of the member iterators.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">make_zip_iterator</span></code> function is provided to simplify the construction of <code class="docutils literal notranslate"><span class="pre">zip_iterator</span></code> instances.
The function receives each of the iterators to be held as member iterators by the <code class="docutils literal notranslate"><span class="pre">zip_iterator</span></code> instance
it returns.</p>
<p>The example provided for <code class="docutils literal notranslate"><span class="pre">discard_iterator</span></code> demonstrates <code class="docutils literal notranslate"><span class="pre">zip_iterator</span></code> use in defining stencil
algorithms. The <code class="docutils literal notranslate"><span class="pre">zip_iterator</span></code> is also useful in defining by key algorithms where input iterators
representing keys and values are processed as key-value pairs. The example below demonstrates a stable sort
by key where only the keys are compared but both keys and values are swapped:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">namespace</span> <span class="n">oneapi</span><span class="p">;</span>
<span class="n">auto</span> <span class="n">zipped_begin</span> <span class="o">=</span> <span class="n">dpl</span><span class="p">::</span><span class="n">make_zip_iterator</span><span class="p">(</span><span class="n">keys_begin</span><span class="p">,</span> <span class="n">vals_begin</span><span class="p">);</span>
<span class="n">std</span><span class="p">::</span><span class="n">stable_sort</span><span class="p">(</span><span class="n">dpl</span><span class="p">::</span><span class="n">execution</span><span class="p">::</span><span class="n">dpcpp_default</span><span class="p">,</span> <span class="n">zipped_begin</span><span class="p">,</span> <span class="n">zipped_begin</span> <span class="o">+</span> <span class="n">n</span><span class="p">,</span>
    <span class="p">[](</span><span class="n">auto</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">auto</span> <span class="n">rhs</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">get</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">(</span><span class="n">lhs</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">get</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">(</span><span class="n">rhs</span><span class="p">);</span> <span class="p">});</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="function-object-classes">
<h2>Function Object Classes<a class="headerlink" href="#function-object-classes" title="Permalink to this headline">¶</a></h2>
<p>The definitions of the function objects provided in the Extension API are available through the
<code class="docutils literal notranslate"><span class="pre">oneapi/dpl/functional</span></code> header.  All function objects are implemented in the <code class="docutils literal notranslate"><span class="pre">oneapi::dpl</span></code> namespace.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">identity</span></code>: A C++11 implementation of the C++20 <code class="docutils literal notranslate"><span class="pre">std::identity</span></code> function object type, where the operator() returns the
argument unchanged.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minimum</span></code>: A function object type where the operator() applies <code class="docutils literal notranslate"><span class="pre">std::less</span></code> to its arguments, then returns the
lesser argument unchanged.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maximum</span></code>: A function object type where the operator() applies <code class="docutils literal notranslate"><span class="pre">std::greater</span></code> to its arguments, then returns the
greater argument unchanged.</p></li>
</ul>
</div>
<div class="section" id="range-based-api">
<h2>Range-based API<a class="headerlink" href="#range-based-api" title="Permalink to this headline">¶</a></h2>
<p>C++20 indroduces the Ranges library. C++20 standard splits ranges into two categories: factories and adaptors.
A range factory doesn’t have underlying data. An element is generated on success by an index or by dereferencing an iterator.
A range adaptor, from the oneAPI DPC++ Library (oneDPL) perspective, is an utility that transforms base range, or another adapted range into
a view with custom behavior.</p>
<p>oneDPL supports <code class="docutils literal notranslate"><span class="pre">iota_view</span></code> range factory.</p>
<p><code class="docutils literal notranslate"><span class="pre">sycl::buffer</span></code> wrapped with <code class="docutils literal notranslate"><span class="pre">all_view</span></code> can be used as the range.</p>
<p>The oneDPL considers the supported factories and <code class="docutils literal notranslate"><span class="pre">all_view</span></code> as base ranges.
The range adaptors may be combined into a pipeline with a <code class="docutils literal notranslate"><span class="pre">base</span></code> range at the beginning. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cl</span><span class="p">::</span><span class="n">sycl</span><span class="p">::</span><span class="n">buffer</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="n">buf</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">cl</span><span class="p">::</span><span class="n">sycl</span><span class="p">::</span><span class="nb">range</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span>
<span class="n">auto</span> <span class="n">range_1</span> <span class="o">=</span> <span class="n">iota_view</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">views</span><span class="p">::</span><span class="n">reverse</span><span class="p">();</span>
<span class="n">auto</span> <span class="n">range_2</span> <span class="o">=</span> <span class="n">all_view</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span> <span class="o">|</span> <span class="n">views</span><span class="p">::</span><span class="n">reverse</span><span class="p">();</span>
</pre></div>
</div>
<p>For the range, based on the <code class="docutils literal notranslate"><span class="pre">all_view</span></code> factory, data access is permitted on a device only. <code class="docutils literal notranslate"><span class="pre">size()</span></code> and <code class="docutils literal notranslate"><span class="pre">empty()</span></code> methods are allowed
to be called on both host and device.</p>
<p>The following algorithms are available to use with the ranges:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">adjacent_find</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all_of</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">any_of</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">copy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">copy_if</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count_if</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">equal</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exclusive_scan</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">find</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">find_if</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">find_if_not</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">find_end</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">find_first_of</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">for_each</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inclusive_scan</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_sorted</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_sorted_until</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min_element</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_element</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">merge</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minmax_element</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">move</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">none_of</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reduce</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_if</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_copy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_copy_if</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replace</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replace_if</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replace_copy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replace_copy_if</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reverse</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reverse_copy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rotate_copy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sort</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stable_sort</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">swap_ranges</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform_reduce</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform_exclusive_scan</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform_inclusive_scan</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unique</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unique_copy</span></code></p></li>
</ul>
<p>The signature example of the range-based algorithms looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="o">&lt;</span><span class="n">typename</span> <span class="n">ExecutionPolicy</span><span class="p">,</span> <span class="n">typename</span> <span class="n">Range1</span><span class="p">,</span> <span class="n">typename</span> <span class="n">Range2</span><span class="o">&gt;</span>
<span class="n">void</span> <span class="n">copy</span><span class="p">(</span><span class="n">ExecutionPolicy</span><span class="o">&amp;&amp;</span> <span class="n">exec</span><span class="p">,</span> <span class="n">Range1</span><span class="o">&amp;&amp;</span> <span class="n">source</span><span class="p">,</span> <span class="n">Range2</span><span class="o">&amp;&amp;</span> <span class="n">destination</span><span class="p">);</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">source</span></code> is used instead of two iterators to represent the input and <code class="docutils literal notranslate"><span class="pre">destination</span></code> represents the output.</p>
<p>These algorithms are declared in <code class="docutils literal notranslate"><span class="pre">oneapi::dpl::experimental::ranges</span></code> namespace and implemented only for Data Parallel C++ (DPC++) policies.
In order to make these algorithm available the <code class="docutils literal notranslate"><span class="pre">&lt;oneapi/dpl/ranges&gt;</span></code> header should be included (after <code class="docutils literal notranslate"><span class="pre">&lt;oneapi/dpl/execution&gt;</span></code>).
Use of the range-based API requires C++17 and the C++ standard libraries coming with GCC 8.1 (or higher) or Clang 7 (or higher).</p>
<p>The following viewable ranges (CPO’s) are declared in <code class="docutils literal notranslate"><span class="pre">oneapi::dpl::experimental::ranges</span></code> namespace. Only those are
allowed to use as ranges for range-based algorithms.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">views::iota</span></code>: A range factory that generates a sequence of N elements, which starts from an initial value and ends by final N-1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views::all</span></code>: A custom utility that represents a view of all or a part of <code class="docutils literal notranslate"><span class="pre">sycl::buffer</span></code> underlying elements for reading and writing on a device.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views::all_read</span></code>: A custom utility that represents a view of all or a part of <code class="docutils literal notranslate"><span class="pre">sycl::buffer</span></code> underlying elements for reading on a device.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views::all_write</span></code>: A custom utility that represents a view of all or a part of <code class="docutils literal notranslate"><span class="pre">sycl::buffer</span></code> underlying elements for writing on a device.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views::host_all</span></code>: A custom utility that represents a view of all or a part of <code class="docutils literal notranslate"><span class="pre">sycl::buffer</span></code> underlying elements for reading and writing on the host.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views::subrange</span></code>: A utility that represents a view of USM data range defined by a two USM pointers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views::zip</span></code>: A custom range adapter that produces one <code class="docutils literal notranslate"><span class="pre">zip_view</span></code> from other several views.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views::transform</span></code>: A range adapter that represents a view of a underlying sequence after applying a transformation to each element.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views::reverse</span></code>: A range adapter that produces a reversed sequence of elements provided by another view.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views::take</span></code>: A range adapter that produces a view of the first N elements from another view.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">views::drop</span></code>: A range adapter that produces a view excluding the first N elements from another view.</p></li>
</ul>
</div>
<div class="section" id="example-of-range-based-api-usage">
<h2>Example of Range-based API Usage<a class="headerlink" href="#example-of-range-based-api-usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="k">namespace</span> <span class="nn">oneapi</span><span class="o">::</span><span class="nn">dpl</span><span class="o">::</span><span class="nn">experimental</span><span class="o">::</span><span class="nn">ranges</span><span class="p">;</span>

<span class="p">{</span>
    <span class="n">cl</span><span class="o">::</span><span class="n">sycl</span><span class="o">::</span><span class="n">buffer</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">A</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">cl</span><span class="o">::</span><span class="n">sycl</span><span class="o">::</span><span class="n">range</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">max_n</span><span class="p">));</span>
    <span class="n">cl</span><span class="o">::</span><span class="n">sycl</span><span class="o">::</span><span class="n">buffer</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">B</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="n">cl</span><span class="o">::</span><span class="n">sycl</span><span class="o">::</span><span class="n">range</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">max_n</span><span class="p">));</span>

    <span class="k">auto</span> <span class="n">view</span> <span class="o">=</span> <span class="n">all_view</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">|</span> <span class="n">views</span><span class="o">::</span><span class="n">reverse</span><span class="p">();</span>
    <span class="k">auto</span> <span class="n">range_res</span> <span class="o">=</span> <span class="n">all_view</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">cl</span><span class="o">::</span><span class="n">sycl</span><span class="o">::</span><span class="n">access</span><span class="o">::</span><span class="n">mode</span><span class="o">::</span><span class="n">write</span><span class="o">&gt;</span><span class="p">(</span><span class="n">B</span><span class="p">);</span>

    <span class="n">copy</span><span class="p">(</span><span class="n">oneapi</span><span class="o">::</span><span class="n">dpl</span><span class="o">::</span><span class="n">execution</span><span class="o">::</span><span class="n">dpcpp_default</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">range_res</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="async-api">
<h2>Async API<a class="headerlink" href="#async-api" title="Permalink to this headline">¶</a></h2>
<p>The functions defined in the STL <code class="docutils literal notranslate"><span class="pre">&lt;algorithm&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;numeric&gt;</span></code> headers are traditionally blocking. oneDPL extends the
functionality of C++17 parallel algorithms by providing asynchronous algorithms with non-blocking behavior.
This experimental feature enables you to express a concurrent control flow by building dependency chains and interleaving algorithm calls
and interoperability with DPC++ and SYCL* kernels.</p>
<p>The current implementation for async algorithms is limited to DPC++ Execution Policies.
All the functionality described below is available in the <code class="docutils literal notranslate"><span class="pre">oneapi::dpl::experimental</span></code> namespace.</p>
<p>The following async algorithms are currently supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">copy_async</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fill_async</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">for_each_async</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reduce_async</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sort_async</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inclusive_scan_async</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exclusive_scan_async</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform_async</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform_reduce_async</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform_inclusive_scan_async</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform_exclusive_scan_async</span></code></p></li>
</ul>
<p>All the interfaces listed above are a subset of C++17 STL algorithms,
where the suffix <code class="docutils literal notranslate"><span class="pre">_async</span></code> is added to the corresponding name (for example: <code class="docutils literal notranslate"><span class="pre">reduce</span></code>, <code class="docutils literal notranslate"><span class="pre">sort</span></code>, etc.).
The behavior and signatures are overlapping with the C++17 STL algorithm with the following changes:</p>
<ul class="simple">
<li><p>Do not block the execution.</p></li>
<li><p>Take an arbitrary number of events (including 0) as last arguments to allow expressing input dependencies.</p></li>
<li><p>Return future-like object that allows <code class="docutils literal notranslate"><span class="pre">wait</span></code> for completion and <code class="docutils literal notranslate"><span class="pre">get</span></code> the result.</p></li>
</ul>
<p>The type of the future-like object returned from asynchronous algorithm is unspecified. The following member functions are present:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get()</span></code> returns the result.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wait()</span></code> waits for the result to become available.</p></li>
</ul>
<p>If the returned object is the result of an algorithm with device policy, it can be converted into a <code class="docutils literal notranslate"><span class="pre">sycl::event</span></code>.
Lifetime of any resources the algorithm allocates (for example: temporary storage) is bound to the lifetime of the returned object.</p>
<p>Utility functions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wait_for_all(…)</span></code> waits for an arbitrary number of objects that are convertible into <code class="docutils literal notranslate"><span class="pre">sycl::event</span></code> to become ready.</p></li>
</ul>
<div class="section" id="example-of-async-api-usage">
<h3>Example of Async API Usage<a class="headerlink" href="#example-of-async-api-usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;oneapi/dpl/execution&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;oneapi/dpl/async&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;CL/sycl.hpp&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="nn">oneapi</span><span class="p">;</span>
    <span class="p">{</span>
        <span class="cm">/* Build and compute a simple dependency chain: Fill buffer -&gt; Transform -&gt; Reduce */</span>
        <span class="n">sycl</span><span class="o">::</span><span class="n">buffer</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">{</span><span class="mi">10</span><span class="p">};</span>

        <span class="k">auto</span> <span class="n">fut1</span> <span class="o">=</span> <span class="n">dpl</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">fill_async</span><span class="p">(</span><span class="n">dpl</span><span class="o">::</span><span class="n">execution</span><span class="o">::</span><span class="n">dpcpp_default</span><span class="p">,</span>
                                                  <span class="n">dpl</span><span class="o">::</span><span class="n">begin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="n">dpl</span><span class="o">::</span><span class="n">end</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="mi">7</span><span class="p">);</span>

        <span class="k">auto</span> <span class="n">fut2</span> <span class="o">=</span> <span class="n">dpl</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">transform_async</span><span class="p">(</span><span class="n">dpl</span><span class="o">::</span><span class="n">execution</span><span class="o">::</span><span class="n">dpcpp_default</span><span class="p">,</span>
                                                       <span class="n">dpl</span><span class="o">::</span><span class="n">begin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="n">dpl</span><span class="o">::</span><span class="n">end</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="n">dpl</span><span class="o">::</span><span class="n">begin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span>
                                                       <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="k">const</span> <span class="kt">int</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">){</span><span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="p">},</span><span class="n">fut1</span><span class="p">);</span>
        <span class="k">auto</span> <span class="n">ret_val</span> <span class="o">=</span> <span class="n">dpl</span><span class="o">::</span><span class="n">experimental</span><span class="o">::</span><span class="n">reduce_async</span><span class="p">(</span><span class="n">dpl</span><span class="o">::</span><span class="n">execution</span><span class="o">::</span><span class="n">dpcpp_default</span><span class="p">,</span>
                                                       <span class="n">dpl</span><span class="o">::</span><span class="n">begin</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="n">dpl</span><span class="o">::</span><span class="n">end</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="n">fut1</span><span class="p">,</span><span class="n">fut2</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="pstl/macros.html" title="previous page">Macros</a>
    <a class='right-next' id="next-link" href="tested_standard_cpp_api.html" title="next page">Tested Standard C++ APIs</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Intel<br/>
        
            &copy; Copyright Intel Corporation.<br/>
          <div class="extra_footer">
            <p align="right"><a href="https://www.intel.com/content/www/us/en/privacy/intel-cookie-notice.html">Cookies</a></p>
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>